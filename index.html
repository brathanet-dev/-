<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù†Ø¸Ø§Ù… Ø§Ù„Ø¹Ø¯ÙŠØ¯ 306</title>
    <style>
        body { font-family: sans-serif; background: #eceff1; margin: 0; padding: 10px; direction: rtl; }
        .box { background: white; padding: 20px; border-radius: 8px; box-shadow: 0 2px 5px rgba(0,0,0,0.2); max-width: 500px; margin: auto; }
        input, select, textarea { width: 100%; padding: 10px; margin: 8px 0; border: 1px solid #ccc; border-radius: 5px; box-sizing: border-box; }
        .btn { width: 100%; padding: 12px; border: none; border-radius: 5px; cursor: pointer; font-weight: bold; color: white; margin: 5px 0; }
        .primary { background: #1b5e20; }
        .secondary { background: #555; }
        #mainContent, #resTools { display: none; }
        .label { font-size: 12px; font-weight: bold; color: #444; }
        .result-item { padding: 10px; border-bottom: 1px solid #eee; cursor: pointer; background: #f9f9f9; }
    </style>
</head>
<body>

<div id="loginPage" class="box" style="margin-top: 50px;">
    <h2 style="text-align: center; color: #1b5e20;">Ø¯Ø®ÙˆÙ„ Ø§Ù„Ù†Ø¸Ø§Ù…</h2>
    <input type="text" id="user" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…">
    <input type="password" id="pass" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±">
    <button onclick="doLogin()" class="btn primary">Ø¯Ø®ÙˆÙ„</button>
    <p style="font-size: 10px; text-align: center;">Ø¬Ø±Ø¨ admin Ùˆ 1234</p>
</div>

<div id="mainContent">
    <div class="box">
        <div style="display: flex; justify-content: space-between;">
            <b id="title">Ø§Ù„Ø³Ø¬Ù„ Ø§Ù„Ù†Ø´Ø·</b>
            <button onclick="location.reload()" style="font-size: 10px;">Ø®Ø±ÙˆØ¬</button>
        </div>
        <hr>
        
        <div id="formFields">
            </div>
        
        <button onclick="saveRecord()" class="btn primary">Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</button>
        <button onclick="toggleMode()" id="modeBtn" class="btn secondary">Ø§Ù†ØªÙ‚Ø§Ù„ Ù„Ù„Ø¹Ù‚ÙˆØ¨Ø§Øª âš–ï¸</button>
        <hr>
        
        <input type="text" id="searchInput" placeholder="Ø§Ø¨Ø­Ø« Ø¨Ø§Ù„Ø§Ø³Ù… Ù‡Ù†Ø§..." onkeyup="search(this.value)">
        <div id="searchResults"></div>

        <div id="resTools">
            <button onclick="printData()" class="btn secondary">ğŸ–¨ Ø·Ø¨Ø§Ø¹Ø© Ø§Ù„Ø§Ø³ØªÙ…Ø§Ø±Ø©</button>
            <button onclick="moveData()" id="moveBtn" class="btn" style="background: black;">âš–ï¸ ØªØ±Ø­ÙŠÙ„ Ù„Ù„Ø¹Ù‚ÙˆØ¨Ø§Øª</button>
            <button onclick="deleteRecord()" class="btn" style="background: red;">ğŸ—‘ Ø­Ø°Ù</button>
        </div>
    </div>
</div>

<script>
    const fields = ["ID","Ø§Ù„Ø§Ø³Ù…","Ø§Ù„Ù…ÙˆØ§Ù„ÙŠØ¯","Ù…Ø­Ù„ Ø§Ù„ØªÙˆÙ„Ø¯","Ø§Ù„Ø¬Ù†Ø³","Ø§Ù„Ø£Ù…","Ø§Ù„Ù‡ÙˆÙŠØ©","Ø§Ù„Ø­Ø§Ù„Ø©","Ø§Ù„Ø²ÙˆØ¬","Ø§Ù„Ø£Ø·ÙØ§Ù„","Ø§Ù„ØªØ­ØµÙŠÙ„","Ø§Ù„ØªØ®ØµØµ","Ø§Ù„ÙˆØ¸ÙŠÙØ©","Ø§Ù„Ù…Ø­Ø§ÙØ¸Ø©","Ø§Ù„Ù‚Ø¶Ø§Ø¡","Ø§Ù„Ù†Ø§Ø­ÙŠØ©","Ø§Ù„Ù…Ù†Ø·Ù‚Ø©","Ø§Ù„Ù…Ø­Ù„Ø©","Ø§Ù„Ø²Ù‚Ø§Ù‚","Ø§Ù„Ø¯Ø§Ø±","Ø§Ù„Ø¯Ø§Ù„Ø©","Ø§Ù„Ù‡Ø§ØªÙ","Ø§Ù„Ù„ÙˆØ§Ø¡","Ø§Ù„ÙÙˆØ¬","Ø§Ù„Ø³Ø±ÙŠØ©","Ø§Ù„ØµÙ†Ù","Ø§Ù„Ø®Ø¨Ø±Ø§Øª","Ø§Ù„Ù…Ø¹Ø±Ù","Ù‡Ø§ØªÙ Ø§Ù„Ù…Ø¹Ø±Ù","Ù…Ù„Ø§Ø­Ø¸Ø§Øª"];
    const container = document.getElementById('formFields');
    
    // ØªÙˆÙ„ÙŠØ¯ Ø§Ù„Ø­Ù‚ÙˆÙ„
    fields.forEach(f => {
        let l = document.createElement('div'); l.className = 'label'; l.innerText = f;
        let i = document.createElement('input'); i.id = 'f_' + f;
        container.appendChild(l); container.appendChild(i);
    });

    let currentMode = 'active';
    let selectedIdx = -1;

    function doLogin() {
        const u = document.getElementById('user').value;
        const p = document.getElementById('pass').value;
        if ((u === 'admin' && p === '1234') || p === 'RESET306') {
            document.getElementById('loginPage').style.display = 'none';
            document.getElementById('mainContent').style.display = 'block';
        } else {
            alert('Ø¨ÙŠØ§Ù†Ø§Øª Ø®Ø·Ø£');
        }
    }

    function saveRecord() {
        let db = JSON.parse(localStorage.getItem('db_' + currentMode) || '[]');
        let data = {}; fields.forEach(f => data[f] = document.getElementById('f_' + f).value);
        db.push(data);
        localStorage.setItem('db_' + currentMode, JSON.stringify(db));
        alert('ØªÙ… Ø§Ù„Ø­ÙØ¸');
        location.reload();
    }

    function search(val) {
        const res = document.getElementById('searchResults');
        if(val.length < 2) { res.innerHTML = ''; return; }
        let db = JSON.parse(localStorage.getItem('db_' + currentMode) || '[]');
        let filtered = db.filter(i => i["Ø§Ù„Ø§Ø³Ù…"].includes(val));
        res.innerHTML = '';
        filtered.forEach((item, index) => {
            let d = document.createElement('div'); d.className = 'result-item';
            d.innerText = item["Ø§Ù„Ø§Ø³Ù…"];
            d.onclick = () => showItem(item, index);
            res.appendChild(d);
        });
    }

    function showItem(item, idx) {
        selectedIdx = idx;
        fields.forEach(f => document.getElementById('f_' + f).value = item[f] || '');
        document.getElementById('resTools').style.display = 'block';
        document.getElementById('moveBtn').innerText = currentMode === 'active' ? 'âš–ï¸ ØªØ±Ø­ÙŠÙ„ Ù„Ù„Ø¹Ù‚ÙˆØ¨Ø§Øª' : 'âœ… Ø¥Ø¹Ø§Ø¯Ø© Ù„Ù„Ù†Ø´Ø·';
    }

    function moveData() {
        let source = currentMode === 'active' ? 'active' : 'pen';
        let target = currentMode === 'active' ? 'pen' : 'active';
        let dbS = JSON.parse(localStorage.getItem('db_' + source));
        let dbT = JSON.parse(localStorage.getItem('db_' + target) || '[]');
        dbT.push(dbS.splice(selectedIdx, 1)[0]);
        localStorage.setItem('db_' + source, JSON.stringify(dbS));
        localStorage.setItem('db_' + target, JSON.stringify(dbT));
        alert('ØªÙ… Ø§Ù„Ù†Ù‚Ù„ Ø¨Ù†Ø¬Ø§Ø­'); location.reload();
    }

    function toggleMode() {
        currentMode = currentMode === 'active' ? 'pen' : 'active';
        document.getElementById('title').innerText = currentMode === 'active' ? 'Ø§Ù„Ø³Ø¬Ù„ Ø§Ù„Ù†Ø´Ø·' : 'Ø³Ø¬Ù„ Ø§Ù„Ø¹Ù‚ÙˆØ¨Ø§Øª';
        document.getElementById('modeBtn').innerText = currentMode === 'active' ? 'Ø§Ù†ØªÙ‚Ø§Ù„ Ù„Ù„Ø¹Ù‚ÙˆØ¨Ø§Øª âš–ï¸' : 'Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ù†Ø´Ø· âœ…';
    }

    function printData() { window.print(); }
    function deleteRecord() { if(confirm('Ø­Ø°ÙØŸ')){ let db = JSON.parse(localStorage.getItem('db_'+currentMode)); db.splice(selectedIdx,1); localStorage.setItem('db_'+currentMode, JSON.stringify(db)); location.reload(); }}
</script>
</body>
</html>
