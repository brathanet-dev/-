<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>Ù†Ø¸Ø§Ù… Ø§Ù„Ø¹Ø¯ÙŠØ¯ Ø§Ù„Ù…Ø±ÙƒØ²ÙŠ - Ù„ÙˆØ§Ø¡ 306</title>
<style>
body{font-family:'Segoe UI',Tahoma,sans-serif;margin:0;padding:0;background:#f4f4f9;direction:rtl;}
.container{max-width:1400px;margin:20px auto;background:rgba(255,255,255,0.95);padding:25px;border-radius:15px;box-shadow:0 5px 25px rgba(0,0,0,0.1);}
h2{text-align:center;color:#1b5e20;margin:0 0 20px 0;}
.tabs{display:flex;gap:10px;margin-bottom:20px;}
.tab-btn{padding:10px 15px;border:none;border-radius:5px;background:#333;color:white;cursor:pointer;font-weight:bold;transition:.3s;}
.tab-btn.active{background:#1b5e20;}
.tab-content{display:none;}
.tab-content.active{display:block;}
.form-grid{display:grid;grid-template-columns:repeat(4,1fr);gap:12px;margin-bottom:20px;}
.form-grid div{display:flex;flex-direction:column;}
label{font-size:13px;font-weight:bold;margin-bottom:4px;color:#333;}
input,select{padding:10px;border:1px solid #ccc;border-radius:5px;text-align:center;font-size:14px;}
.btn{border:none;padding:8px 12px;border-radius:5px;cursor:pointer;color:white;font-weight:bold;margin:0 5px 10px 0;}
.btn-main{background:#1b5e20;}
.btn-export{background:#2e7d32;}
.btn-import{background:#1565c0;}
.btn-pen{background:#c62828;}
.btn-undo{background:#6a1b9a;}
.dropdown{position:absolute;background:white;border:1px solid #ddd;max-height:200px;overflow-y:auto;display:none;width:100%;z-index:1000;}
.dropdown div{padding:10px;cursor:pointer;border-bottom:1px solid #eee;}
.dropdown div:hover{background:#f0f0f0;}
.table-wrapper{width:100%;overflow-x:auto;margin-top:15px;border:1px solid #ddd;}
.db-table{width:100%;border-collapse:collapse;min-width:1200px;}
.db-table th{background:#0277bd;color:white;padding:10px;border:1px solid #ddd;position:sticky;top:0;}
.db-table td{padding:6px;border:1px solid #ddd;text-align:center;font-size:13px;}
.duplicate{color:red;font-weight:bold;}
.stats{margin-bottom:10px;padding:10px;background:#eee;border-radius:8px;font-weight:bold;}
</style>
</head>
<body>
<div class="container">
<h2>Ù†Ø¸Ø§Ù… Ø§Ù„Ø¹Ø¯ÙŠØ¯ Ø§Ù„Ù…Ø±ÙƒØ²ÙŠ - Ù„ÙˆØ§Ø¡ 306</h2>

<div class="tabs">
<button class="tab-btn active" onclick="showTab('tabForm')">ğŸ“ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</button>
<button class="tab-btn" onclick="showTab('tabDB')">ğŸ“‹ Ø§Ù„Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©</button>
<button class="tab-btn" onclick="showTab('tabPen')">âš–ï¸ Ø§Ù„Ø¹Ù‚ÙˆØ¨Ø§Øª</button>
</div>

<!-- ØªØ¨ÙˆÙŠØ¨ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª -->
<div id="tabForm" class="tab-content active">
<form id="mainForm" onsubmit="saveData(event); return false;">
<div class="form-grid">
  <div><label>ID</label><input type="text" id="idNo"></div>
  <div><label>Ø§Ù„Ø§Ø³Ù… Ø§Ù„Ø±Ø¨Ø§Ø¹ÙŠ ÙˆØ§Ù„Ù„Ù‚Ø¨</label><input type="text" id="fullName" required onkeyup="liveSearch(this.value)"></div>
  <div><label>Ø§Ù„Ù…ÙˆØ§Ù„ÙŠØ¯</label><input type="text" id="birthDate"></div>
  <div><label>Ù…Ø­Ù„ Ø§Ù„ØªÙˆÙ„Ø¯</label><input type="text" id="birthPlace"></div>
  <div><label>Ø§Ù„Ø¬Ù†Ø³</label><input type="text" id="gender"></div>
  <div><label>Ø§Ø³Ù… Ø§Ù„Ø£Ù…</label><input type="text" id="motherName"></div>
  <div><label>Ø±Ù‚Ù… Ø§Ù„Ù‡ÙˆÙŠØ©</label><input type="text" id="natId"></div>
  <div><label>Ø§Ù„Ø­Ø§Ù„Ø© Ø§Ù„Ø§Ø¬ØªÙ…Ø§Ø¹ÙŠØ©</label><input type="text" id="marital"></div>
  <div><label>Ø§Ø³Ù… Ø§Ù„Ø²ÙˆØ¬Ø©</label><input type="text" id="spouse"></div>
  <div><label>Ø¹Ø¯Ø¯ Ø§Ù„Ø§Ø·ÙØ§Ù„</label><input type="text" id="kids"></div>
  <div><label>Ø§Ù„ØªØ­ØµÙŠÙ„ Ø§Ù„Ø¯Ø±Ø§Ø³ÙŠ</label><input type="text" id="edu"></div>
  <div><label>Ø§Ù„ØªØ®ØµØµ Ø§Ù„Ø¯Ø±Ø§Ø³ÙŠ</label><input type="text" id="spec"></div>
  <div><label>Ø§Ù„Ø¹Ù…Ù„</label><input type="text" id="job"></div>
  <div><label>Ø§Ù„Ù…Ø­Ø§ÙØ¸Ø©</label><input type="text" id="prov"></div>
  <div><label>Ø§Ù„Ù‚Ø¶Ø§Ø¡</label><input type="text" id="dist"></div>
  <div><label>Ø§Ù„Ù†Ø§Ø­ÙŠØ©</label><input type="text" id="subDist"></div>
  <div><label>Ø§Ù„Ù…Ù†Ø·Ù‚Ø©</label><input type="text" id="region"></div>
  <div><label>Ø§Ù„Ù…Ø­Ù„Ø©</label><input type="text" id="mahala"></div>
  <div><label>Ø§Ù„Ø²Ù‚Ø§Ù‚</label><input type="text" id="zuqaq"></div>
  <div><label>Ø§Ù„Ø¯Ø§Ø±</label><input type="text" id="dar"></div>
  <div><label>Ø£Ù‚Ø±Ø¨ Ù†Ù‚Ø·Ø© Ø¯Ø§Ù„Ø©</label><input type="text" id="point"></div>
  <div><label>Ø§Ù„Ù‡Ø§ØªÙ</label><input type="text" id="phone"></div>
  <div><label>Ø§Ù„Ù„ÙˆØ§Ø¡</label><input type="text" id="brigade"></div>
  <div><label>Ø§Ù„ÙÙˆØ¬</label><input type="text" id="fowj"></div>
  <div><label>Ø§Ù„Ø³Ø±ÙŠØ© (Ø±Ù‚Ù…)</label><input type="text" id="sariyaNum"></div>
  <div><label>Ø§Ù„ØµÙ†Ù</label><input type="text" id="sanaf"></div>
  <div><label>Ø§Ù„Ø®Ø¨Ø±Ø§Øª Ø§Ù„Ø¹Ø³ÙƒØ±ÙŠØ©</label><input type="text" id="exp"></div>
  <div><label>Ø§Ù„Ù…Ø¹Ø±Ù</label><input type="text" id="refN"></div>
  <div><label>Ù‡Ø§ØªÙ Ø§Ù„Ù…Ø¹Ø±Ù</label><input type="text" id="refP"></div>
  <div style="grid-column: span 2;"><label>Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø§Øª</label><input type="text" id="notes"></div>
  <div style="grid-column: span 2;"><label>Ø§Ø³Ù… Ø§Ù„Ø³Ø±ÙŠØ©</label><input type="text" id="sariyaName"></div>
</div>
<button type="submit" class="btn btn-main">ğŸ’¾ Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</button>
</form>
<div id="searchDropdown" class="dropdown"></div>
</div>

<!-- ØªØ¨ÙˆÙŠØ¨ Ø§Ù„Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© -->
<div id="tabDB" class="tab-content">
<div class="stats" id="statsDB">ğŸ“Š Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª: Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø£ÙØ±Ø§Ø¯: 0 | Ø§Ù„Ù…ÙƒØ±Ø±Ø§Øª: 0</div>
<input type="text" id="searchDB" placeholder="Ø¨Ø­Ø« Ø³Ø±ÙŠØ¹" onkeyup="renderTable('DB')">
<select id="filterFowjDB" onchange="renderTable('DB')"><option value="">ÙƒÙ„ Ø§Ù„Ø£ÙÙˆØ§Ø¬</option></select>
<select id="filterSNumDB" onchange="renderTable('DB')"><option value="">ÙƒÙ„ Ø§Ù„Ø³Ø±Ø§ÙŠØ§</option></select>
<select id="filterSNameDB" onchange="renderTable('DB')"><option value="">ÙƒÙ„ Ø£Ø³Ù…Ø§Ø¡ Ø§Ù„Ø³Ø±Ø§ÙŠØ§</option></select>
<button onclick="exportCSV('DB')" class="btn btn-export">ØªØµØ¯ÙŠØ± CSV</button>
<input type="file" id="importFileDB" style="display:none" accept=".csv" onchange="importCSV(this,'DB')">
<button onclick="document.getElementById('importFileDB').click()" class="btn btn-import">Ø§Ø³ØªÙŠØ±Ø§Ø¯ CSV</button>
<div class="table-wrapper">
<table class="db-table" id="tableDB"><thead></thead><tbody></tbody></table>
</div>
</div>

<!-- ØªØ¨ÙˆÙŠØ¨ Ø§Ù„Ø¹Ù‚ÙˆØ¨Ø§Øª -->
<div id="tabPen" class="tab-content">
<div class="stats" id="statsPEN">ğŸ“Š Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª: Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø¹Ø§Ù‚Ø¨ÙŠÙ†: 0 | Ø§Ù„Ù…ÙƒØ±Ø±Ø§Øª: 0</div>
<input type="text" id="searchPen" placeholder="Ø¨Ø­Ø« Ø³Ø±ÙŠØ¹" onkeyup="renderTable('PEN')">
<select id="filterFowjPen" onchange="renderTable('PEN')"><option value="">ÙƒÙ„ Ø§Ù„Ø£ÙÙˆØ§Ø¬</option></select>
<select id="filterSNumPen" onchange="renderTable('PEN')"><option value="">ÙƒÙ„ Ø§Ù„Ø³Ø±Ø§ÙŠØ§</option></select>
<select id="filterSNamePen" onchange="renderTable('PEN')"><option value="">ÙƒÙ„ Ø£Ø³Ù…Ø§Ø¡ Ø§Ù„Ø³Ø±Ø§ÙŠØ§</option></select>
<button onclick="exportCSV('PEN')" class="btn btn-export">ØªØµØ¯ÙŠØ± CSV</button>
<input type="file" id="importFilePen" style="display:none" accept=".csv" onchange="importCSV(this,'PEN')">
<button onclick="document.getElementById('importFilePen').click()" class="btn btn-import">Ø§Ø³ØªÙŠØ±Ø§Ø¯ CSV</button>
<div class="table-wrapper">
<table class="db-table" id="tablePEN"><thead></thead><tbody></tbody></table>
</div>
</div>

</div>

<script>
const DB_KEY='db_306_data';
const PEN_KEY='
